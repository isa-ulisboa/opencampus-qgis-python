# path names need to be adapted

# select nests with diameter larger than a given value
processing.run("native:extractbyexpression", 
{'INPUT':'delimitedtext://file:///C:/Users/PyQGIS/Documents/sessions/s1_stopvespa/input/STOPVespa_2023_simplified.csv?type=csv&delimiter=;&maxFields=10000&detectTypes=yes&xField=long&yField=lat&crs=EPSG:4326&spatialIndex=yes&subsetIndex=no&watchFile=no',
'EXPRESSION':' "diameter" > 100',
'OUTPUT':'C:/Users/PyQGIS/Documents/sessions/s1_stopvespa/output/vespa_100.shp'})

# select counties that contain nests
processing.run("native:extractbylocation", 
{'INPUT':'C:\\Users\\PyQGIS\\Documents\\sessions\\s1_stopvespa\\input\\Cont_Conc_CAOP2022.shp',
'PREDICATE':[0],
'INTERSECT':'C:/Users/PyQGIS/Documents/sessions/s1_stopvespa/output/vespa_100.shp',
'OUTPUT':'C:/Users/PyQGIS/Documents/sessions/s1_stopvespa/output/conc_vespa_100.shp'})
